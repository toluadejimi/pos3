"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6193],{61820:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(5947),o=a.n(s);const r={metaInfo:{title:"Edit Project"},data:function(){return{isLoading:!0,SubmitProcessing:!1,clients:[],companies:[],employees:[],assigned_employees:[],project:{title:"",description:"",client_id:"",company_id:"",start_date:"",end_date:"",status:""}}},methods:{Submit_Project:function(){var e=this;this.$refs.ref_edit_project.validate().then((function(t){t?e.Update_Project():e.makeToast("danger",e.$t("Please_fill_the_form_correctly"),e.$t("Failed"))}))},makeToast:function(e,t,a){this.$root.$bvToast.toast(t,{title:a,variant:e,solid:!0})},getValidationState:function(e){var t=e.dirty,a=e.validated,s=e.valid;return t||a?void 0===s?null:s:null},Selected_Client:function(e){null===e&&(this.project.client_id="")},Selected_Team:function(e){null===e&&(this.assigned_employees=[])},Selected_Status:function(e){null===e&&(this.project.status="")},Selected_Company:function(e){null===e&&(this.project.company_id=""),this.employees=[],this.assigned_employees=[],this.Get_employees_by_company(e)},Get_employees_by_company:function(e){var t=this;axios.get("/Get_employees_by_company?id="+e).then((function(e){var a=e.data;return t.employees=a}))},Update_Project:function(){var e=this;this.SubmitProcessing=!0;var t=this;o().start(),o().set(.1);var a=this.$route.params.id;axios.put("projects/".concat(a),{title:t.project.title,description:t.project.description,client:t.project.client_id,company_id:t.project.company_id,assigned_to:t.assigned_employees,start_date:t.project.start_date,end_date:t.project.end_date,status:t.project.status}).then((function(t){o().done(),e.makeToast("success",e.$t("Successfully_Updated"),e.$t("Success")),e.SubmitProcessing=!1,e.$router.push({name:"index_project"})})).catch((function(t){o().done(),e.makeToast("danger",e.$t("InvalidData"),e.$t("Failed")),e.SubmitProcessing=!1}))},GetElements:function(){var e=this,t=this.$route.params.id;axios.get("projects/".concat(t,"/edit")).then((function(t){e.project=t.data.project,e.clients=t.data.clients,e.companies=t.data.companies,e.employees=t.data.employees,e.assigned_employees=t.data.assigned_employees,e.isLoading=!1})).catch((function(t){setTimeout((function(){e.isLoading=!1}),500)}))}},created:function(){this.GetElements()}};const n=(0,a(14486).A)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:e.$t("Edit_Project"),folder:e.$t("Projects")}}),e._v(" "),e.isLoading?t("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e._e(),e._v(" "),e.isLoading?e._e():t("validation-observer",{ref:"ref_edit_project"},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.Submit_Project.apply(null,arguments)}}},[t("b-row",[t("b-col",{attrs:{lg:"12",md:"12",sm:"12"}},[t("b-card",[t("b-row",[t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Title",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("b-form-group",{attrs:{label:e.$t("title")+" *"}},[t("b-form-input",{attrs:{placeholder:e.$t("Enter_Project_Title"),state:e.getValidationState(a),"aria-describedby":"title-feedback",label:"Project Title"},model:{value:e.project.title,callback:function(t){e.$set(e.project,"title",t)},expression:"project.title"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"title-feedback"}},[e._v(e._s(a.errors[0]))])],1)]}}],null,!1,3561917277)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"start_date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("b-form-group",{attrs:{label:e.$t("start_date")+" *"}},[t("b-form-input",{attrs:{state:e.getValidationState(a),"aria-describedby":"start_date-feedback",type:"date"},model:{value:e.project.start_date,callback:function(t){e.$set(e.project,"start_date",t)},expression:"project.start_date"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"start_date-feedback"}},[e._v(e._s(a.errors[0]))])],1)]}}],null,!1,1212047739)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"end_date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("b-form-group",{attrs:{label:e.$t("Finish_Date")+" *"}},[t("b-form-input",{attrs:{state:e.getValidationState(a),"aria-describedby":"end_date-feedback",type:"date"},model:{value:e.project.end_date,callback:function(t){e.$set(e.project,"end_date",t)},expression:"project.end_date"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"end_date-feedback"}},[e._v(e._s(a.errors[0]))])],1)]}}],null,!1,2953173831)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Client"},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.valid,o=a.errors;return t("b-form-group",{attrs:{label:e.$t("Customer")+" *"}},[t("v-select",{class:{"is-invalid":!!o.length},attrs:{state:!o[0]&&(!!s||null),reduce:function(e){return e.value},placeholder:e.$t("Choose_Customer"),options:e.clients.map((function(e){return{label:e.name,value:e.id}}))},on:{input:e.Selected_Client},model:{value:e.project.client_id,callback:function(t){e.$set(e.project,"client_id",t)},expression:"project.client_id"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(o[0]))])],1)}}],null,!1,4183804247)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Company"},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.valid,o=a.errors;return t("b-form-group",{attrs:{label:e.$t("Company")+" *"}},[t("v-select",{class:{"is-invalid":!!o.length},attrs:{state:!o[0]&&(!!s||null),reduce:function(e){return e.value},placeholder:e.$t("Choose_Company"),options:e.companies.map((function(e){return{label:e.name,value:e.id}}))},on:{input:e.Selected_Company},model:{value:e.project.company_id,callback:function(t){e.$set(e.project,"company_id",t)},expression:"project.company_id"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(o[0]))])],1)}}],null,!1,4228484727)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Assigned_Employees"},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.valid,o=a.errors;return t("b-form-group",{attrs:{label:e.$t("Assigned_Employees")}},[t("v-select",{class:{"is-invalid":!!o.length},attrs:{state:!o[0]&&(!!s||null),reduce:function(e){return e.value},placeholder:e.$t("Choose_Team"),options:e.employees.map((function(e){return{label:e.username,value:e.id}}))},on:{input:e.Selected_Team},model:{value:e.assigned_employees,callback:function(t){e.assigned_employees=t},expression:"assigned_employees"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(o[0]))])],1)}}],null,!1,743477489)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Status",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.valid,o=a.errors;return t("b-form-group",{attrs:{label:e.$t("Status")+" *"}},[t("v-select",{class:{"is-invalid":!!o.length},attrs:{state:!o[0]&&(!!s||null),reduce:function(e){return e.value},placeholder:e.$t("Choose_Status"),options:[{label:"Not Started",value:"not_started"},{label:"In Progress",value:"progress"},{label:"Cancelled",value:"cancelled"},{label:"On Hold",value:"hold"},{label:"Completed",value:"completed"}]},on:{input:e.Selected_Status},model:{value:e.project.status,callback:function(t){e.$set(e.project,"status",t)},expression:"project.status"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(o[0]))])],1)}}],null,!1,2872707373)})],1),e._v(" "),t("b-col",{attrs:{lg:"8",md:"8",sm:"12"}},[t("validation-provider",{attrs:{name:"Description"},scopedSlots:e._u([{key:"default",fn:function(a){var s=a.valid,o=a.errors;return t("b-form-group",{attrs:{label:e.$t("Details")}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.project.description,expression:"project.description"}],staticClass:"form-control",class:{"is-invalid":!!o.length},attrs:{state:!o[0]&&(!!s||null),rows:"4",placeholder:e.$t("Afewwords")},domProps:{value:e.project.description},on:{input:function(t){t.target.composing||e.$set(e.project,"description",t.target.value)}}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(o[0]))])],1)}}],null,!1,1486681098)})],1),e._v(" "),t("b-col",{attrs:{md:"12"}},[t("b-form-group",[t("b-button",{attrs:{variant:"primary",type:"submit",disabled:e.SubmitProcessing}},[t("i",{staticClass:"i-Yes me-2 font-weight-bold"}),e._v(" "+e._s(e.$t("submit")))]),e._v(" "),e.SubmitProcessing?e._m(0):e._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"typo__p"},[e("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);